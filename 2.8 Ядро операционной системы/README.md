# Домашнее задание к занятию «2.8 Ядро операционной системы»

## Задание 1

При каких событиях выполнение процесса переходит в режим ядра?

Приведите ответ в свободной форме.

### ответ: 



## Задание 2

Найдите имя автора модуля libcrc32c.

В качестве ответа приложите скриншот вывода команды.

### ответ: 



## Задание 3

Используя утилиту strace выясните какой системный вызов использует команда cd.

Примечание: она не является внешним файлом, но для наших целей можно схитрить: strace bash -c 'cd /tmp'. Если вывод кажется слишком перегруженным, подумайте, что можно сделать, чтобы оставить в нём только релевантную информацию?

В качестве ответа напишите название системного вызова.

### ответ: 



# Дополнительные задания (со звездочкой*)
## Эти задания дополнительные (необязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

## Задание 4
Соберите свой модуль и загрузите его в ядро.

Примечание: лучше использовать чистую виртуальную машину, чтобы нивелировать шанс сломать систему.

Установим необходимые пакеты:
apt-get install gcc make linux-headers-$(uname -r)

Создаем файл модуля:
1
2
3
mkdir kmod-hello_world
cd kmod-hello_world/
touch ./mhello.c
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
#define MODULE
#include <linux/module.h>
#include <linux/init.h>
#include <linux/kernel.h>

MODULE_LICENSE("GPLv3");

int init_module(void){
    printk("<1> Hello,World\n");
    return 0;
}

void cleanup_module(void){
    printk("<1> Goodbye.\n");
}
Создаем Makefile: touch ./Makefile
1
2
3
4
5
6
7
8
9
obj-m += mhello.o

hello-objs := mhello.c

all:
	make -C /lib/modules/$(shell uname -r)/build/ M=$(PWD) modules

clean:
	make -C /lib/modules/$(shell uname -r)/build/ M=$(PWD) clean
Обратите внимание, что отступы перед make - это табуляция, а не пробелы. Для синтаксиса Makefile это важно.

Собираем модуль и устанавливаем его с помощью insmod.
1
2
make all
insmod path/to/module.ko
В качестве ответа приложите скриншот вывода установки модуля в dmesg


### ответ: 
